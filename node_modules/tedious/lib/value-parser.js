"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _metadataParser = require("./metadata-parser");
var _dataType = require("./data-type");
var _iconvLite = _interopRequireDefault(require("iconv-lite"));
var _sprintfJs = require("sprintf-js");
var _guidParser = require("./guid-parser");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const NULL = (1 << 16) - 1;
const MAX = (1 << 16) - 1;
const THREE_AND_A_THIRD = 3 + 1 / 3;
const MONEY_DIVISOR = 10000;
const PLP_NULL = Buffer.from([0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF]);
const UNKNOWN_PLP_LEN = Buffer.from([0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF]);
const DEFAULT_ENCODING = 'utf8';
function readTinyInt(parser, callback) {
  parser.readUInt8(callback);
}
function readSmallInt(parser, callback) {
  parser.readInt16LE(callback);
}
function readInt(parser, callback) {
  parser.readInt32LE(callback);
}
function readBigInt(parser, callback) {
  parser.readBigInt64LE(value => {
    callback(value.toString());
  });
}
function readReal(parser, callback) {
  parser.readFloatLE(callback);
}
function readFloat(parser, callback) {
  parser.readDoubleLE(callback);
}
function readSmallMoney(parser, callback) {
  parser.readInt32LE(value => {
    callback(value / MONEY_DIVISOR);
  });
}
function readMoney(parser, callback) {
  parser.readInt32LE(high => {
    parser.readUInt32LE(low => {
      callback((low + 0x100000000 * high) / MONEY_DIVISOR);
    });
  });
}
function readBit(parser, callback) {
  parser.readUInt8(value => {
    callback(!!value);
  });
}
function valueParse(parser, metadata, options, callback) {
  const type = metadata.type;
  switch (type.name) {
    case 'Null':
      return callback(null);
    case 'TinyInt':
      return readTinyInt(parser, callback);
    case 'SmallInt':
      return readSmallInt(parser, callback);
    case 'Int':
      return readInt(parser, callback);
    case 'BigInt':
      return readBigInt(parser, callback);
    case 'IntN':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 1:
            return readTinyInt(parser, callback);
          case 2:
            return readSmallInt(parser, callback);
          case 4:
            return readInt(parser, callback);
          case 8:
            return readBigInt(parser, callback);
          default:
            throw new Error('Unsupported dataLength ' + dataLength + ' for IntN');
        }
      });
    case 'Real':
      return readReal(parser, callback);
    case 'Float':
      return readFloat(parser, callback);
    case 'FloatN':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 4:
            return readReal(parser, callback);
          case 8:
            return readFloat(parser, callback);
          default:
            throw new Error('Unsupported dataLength ' + dataLength + ' for FloatN');
        }
      });
    case 'SmallMoney':
      return readSmallMoney(parser, callback);
    case 'Money':
      return readMoney(parser, callback);
    case 'MoneyN':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 4:
            return readSmallMoney(parser, callback);
          case 8:
            return readMoney(parser, callback);
          default:
            throw new Error('Unsupported dataLength ' + dataLength + ' for MoneyN');
        }
      });
    case 'Bit':
      return readBit(parser, callback);
    case 'BitN':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 1:
            return readBit(parser, callback);
          default:
            throw new Error('Unsupported dataLength ' + dataLength + ' for BitN');
        }
      });
    case 'VarChar':
    case 'Char':
      const codepage = metadata.collation.codepage;
      if (metadata.dataLength === MAX) {
        return readMaxChars(parser, codepage, callback);
      } else {
        return parser.readUInt16LE(dataLength => {
          if (dataLength === NULL) {
            return callback(null);
          }
          readChars(parser, dataLength, codepage, callback);
        });
      }
    case 'NVarChar':
    case 'NChar':
      if (metadata.dataLength === MAX) {
        return readMaxNChars(parser, callback);
      } else {
        return parser.readUInt16LE(dataLength => {
          if (dataLength === NULL) {
            return callback(null);
          }
          readNChars(parser, dataLength, callback);
        });
      }
    case 'VarBinary':
    case 'Binary':
      if (metadata.dataLength === MAX) {
        return readMaxBinary(parser, callback);
      } else {
        return parser.readUInt16LE(dataLength => {
          if (dataLength === NULL) {
            return callback(null);
          }
          readBinary(parser, dataLength, callback);
        });
      }
    case 'Text':
      return parser.readUInt8(textPointerLength => {
        if (textPointerLength === 0) {
          return callback(null);
        }
        parser.readBuffer(textPointerLength, _textPointer => {
          parser.readBuffer(8, _timestamp => {
            parser.readUInt32LE(dataLength => {
              readChars(parser, dataLength, metadata.collation.codepage, callback);
            });
          });
        });
      });
    case 'NText':
      return parser.readUInt8(textPointerLength => {
        if (textPointerLength === 0) {
          return callback(null);
        }
        parser.readBuffer(textPointerLength, _textPointer => {
          parser.readBuffer(8, _timestamp => {
            parser.readUInt32LE(dataLength => {
              readNChars(parser, dataLength, callback);
            });
          });
        });
      });
    case 'Image':
      return parser.readUInt8(textPointerLength => {
        if (textPointerLength === 0) {
          return callback(null);
        }
        parser.readBuffer(textPointerLength, _textPointer => {
          parser.readBuffer(8, _timestamp => {
            parser.readUInt32LE(dataLength => {
              readBinary(parser, dataLength, callback);
            });
          });
        });
      });
    case 'Xml':
      return readMaxNChars(parser, callback);
    case 'SmallDateTime':
      return readSmallDateTime(parser, options.useUTC, callback);
    case 'DateTime':
      return readDateTime(parser, options.useUTC, callback);
    case 'DateTimeN':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 4:
            return readSmallDateTime(parser, options.useUTC, callback);
          case 8:
            return readDateTime(parser, options.useUTC, callback);
          default:
            throw new Error('Unsupported dataLength ' + dataLength + ' for DateTimeN');
        }
      });
    case 'Time':
      return parser.readUInt8(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        } else {
          return readTime(parser, dataLength, metadata.scale, options.useUTC, callback);
        }
      });
    case 'Date':
      return parser.readUInt8(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        } else {
          return readDate(parser, options.useUTC, callback);
        }
      });
    case 'DateTime2':
      return parser.readUInt8(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        } else {
          return readDateTime2(parser, dataLength, metadata.scale, options.useUTC, callback);
        }
      });
    case 'DateTimeOffset':
      return parser.readUInt8(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        } else {
          return readDateTimeOffset(parser, dataLength, metadata.scale, callback);
        }
      });
    case 'NumericN':
    case 'DecimalN':
      return parser.readUInt8(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        } else {
          return readNumeric(parser, dataLength, metadata.precision, metadata.scale, callback);
        }
      });
    case 'UniqueIdentifier':
      return parser.readUInt8(dataLength => {
        switch (dataLength) {
          case 0:
            return callback(null);
          case 0x10:
            return readUniqueIdentifier(parser, options, callback);
          default:
            throw new Error((0, _sprintfJs.sprintf)('Unsupported guid size %d', dataLength - 1));
        }
      });
    case 'UDT':
      return readMaxBinary(parser, callback);
    case 'Variant':
      return parser.readUInt32LE(dataLength => {
        if (dataLength === 0) {
          return callback(null);
        }
        readVariant(parser, options, dataLength, callback);
      });
    default:
      throw new Error((0, _sprintfJs.sprintf)('Unrecognised type %s', type.name));
  }
}
function readUniqueIdentifier(parser, options, callback) {
  parser.readBuffer(0x10, data => {
    callback(options.lowerCaseGuids ? (0, _guidParser.bufferToLowerCaseGuid)(data) : (0, _guidParser.bufferToUpperCaseGuid)(data));
  });
}
function readNumeric(parser, dataLength, _precision, scale, callback) {
  parser.readUInt8(sign => {
    sign = sign === 1 ? 1 : -1;
    let readValue;
    if (dataLength === 5) {
      readValue = parser.readUInt32LE;
    } else if (dataLength === 9) {
      readValue = parser.readUNumeric64LE;
    } else if (dataLength === 13) {
      readValue = parser.readUNumeric96LE;
    } else if (dataLength === 17) {
      readValue = parser.readUNumeric128LE;
    } else {
      throw new Error((0, _sprintfJs.sprintf)('Unsupported numeric dataLength %d', dataLength));
    }
    readValue.call(parser, value => {
      callback(value * sign / Math.pow(10, scale));
    });
  });
}
function readVariant(parser, options, dataLength, callback) {
  return parser.readUInt8(baseType => {
    const type = _dataType.TYPE[baseType];
    return parser.readUInt8(propBytes => {
      dataLength = dataLength - propBytes - 2;
      switch (type.name) {
        case 'UniqueIdentifier':
          return readUniqueIdentifier(parser, options, callback);
        case 'Bit':
          return readBit(parser, callback);
        case 'TinyInt':
          return readTinyInt(parser, callback);
        case 'SmallInt':
          return readSmallInt(parser, callback);
        case 'Int':
          return readInt(parser, callback);
        case 'BigInt':
          return readBigInt(parser, callback);
        case 'SmallDateTime':
          return readSmallDateTime(parser, options.useUTC, callback);
        case 'DateTime':
          return readDateTime(parser, options.useUTC, callback);
        case 'Real':
          return readReal(parser, callback);
        case 'Float':
          return readFloat(parser, callback);
        case 'SmallMoney':
          return readSmallMoney(parser, callback);
        case 'Money':
          return readMoney(parser, callback);
        case 'Date':
          return readDate(parser, options.useUTC, callback);
        case 'Time':
          return parser.readUInt8(scale => {
            return readTime(parser, dataLength, scale, options.useUTC, callback);
          });
        case 'DateTime2':
          return parser.readUInt8(scale => {
            return readDateTime2(parser, dataLength, scale, options.useUTC, callback);
          });
        case 'DateTimeOffset':
          return parser.readUInt8(scale => {
            return readDateTimeOffset(parser, dataLength, scale, callback);
          });
        case 'VarBinary':
        case 'Binary':
          return parser.readUInt16LE(_maxLength => {
            readBinary(parser, dataLength, callback);
          });
        case 'NumericN':
        case 'DecimalN':
          return parser.readUInt8(precision => {
            parser.readUInt8(scale => {
              readNumeric(parser, dataLength, precision, scale, callback);
            });
          });
        case 'VarChar':
        case 'Char':
          return parser.readUInt16LE(_maxLength => {
            (0, _metadataParser.readCollation)(parser, collation => {
              readChars(parser, dataLength, collation.codepage, callback);
            });
          });
        case 'NVarChar':
        case 'NChar':
          return parser.readUInt16LE(_maxLength => {
            (0, _metadataParser.readCollation)(parser, _collation => {
              readNChars(parser, dataLength, callback);
            });
          });
        default:
          throw new Error('Invalid type!');
      }
    });
  });
}
function readBinary(parser, dataLength, callback) {
  return parser.readBuffer(dataLength, callback);
}
function readChars(parser, dataLength, codepage, callback) {
  if (codepage == null) {
    codepage = DEFAULT_ENCODING;
  }
  return parser.readBuffer(dataLength, data => {
    callback(_iconvLite.default.decode(data, codepage));
  });
}
function readNChars(parser, dataLength, callback) {
  parser.readBuffer(dataLength, data => {
    callback(data.toString('ucs2'));
  });
}
function readMaxBinary(parser, callback) {
  return readMax(parser, callback);
}
function readMaxChars(parser, codepage, callback) {
  if (codepage == null) {
    codepage = DEFAULT_ENCODING;
  }
  readMax(parser, data => {
    if (data) {
      callback(_iconvLite.default.decode(data, codepage));
    } else {
      callback(null);
    }
  });
}
function readMaxNChars(parser, callback) {
  readMax(parser, data => {
    if (data) {
      callback(data.toString('ucs2'));
    } else {
      callback(null);
    }
  });
}
function readMax(parser, callback) {
  parser.readBuffer(8, type => {
    if (type.equals(PLP_NULL)) {
      return callback(null);
    } else if (type.equals(UNKNOWN_PLP_LEN)) {
      return readMaxUnknownLength(parser, callback);
    } else {
      const low = type.readUInt32LE(0);
      const high = type.readUInt32LE(4);
      if (high >= 2 << 53 - 32) {
        console.warn('Read UInt64LE > 53 bits : high=' + high + ', low=' + low);
      }
      const expectedLength = low + 0x100000000 * high;
      return readMaxKnownLength(parser, expectedLength, callback);
    }
  });
}
function readMaxKnownLength(parser, totalLength, callback) {
  const data = Buffer.alloc(totalLength, 0);
  let offset = 0;
  function next(done) {
    parser.readUInt32LE(chunkLength => {
      if (!chunkLength) {
        return done();
      }
      parser.readBuffer(chunkLength, chunk => {
        chunk.copy(data, offset);
        offset += chunkLength;
        next(done);
      });
    });
  }
  next(() => {
    if (offset !== totalLength) {
      throw new Error('Partially Length-prefixed Bytes unmatched lengths : expected ' + totalLength + ', but got ' + offset + ' bytes');
    }
    callback(data);
  });
}
function readMaxUnknownLength(parser, callback) {
  const chunks = [];
  let length = 0;
  function next(done) {
    parser.readUInt32LE(chunkLength => {
      if (!chunkLength) {
        return done();
      }
      parser.readBuffer(chunkLength, chunk => {
        chunks.push(chunk);
        length += chunkLength;
        next(done);
      });
    });
  }
  next(() => {
    callback(Buffer.concat(chunks, length));
  });
}
function readSmallDateTime(parser, useUTC, callback) {
  parser.readUInt16LE(days => {
    parser.readUInt16LE(minutes => {
      let value;
      if (useUTC) {
        value = new Date(Date.UTC(1900, 0, 1 + days, 0, minutes));
      } else {
        value = new Date(1900, 0, 1 + days, 0, minutes);
      }
      callback(value);
    });
  });
}
function readDateTime(parser, useUTC, callback) {
  parser.readInt32LE(days => {
    parser.readUInt32LE(threeHundredthsOfSecond => {
      const milliseconds = Math.round(threeHundredthsOfSecond * THREE_AND_A_THIRD);
      let value;
      if (useUTC) {
        value = new Date(Date.UTC(1900, 0, 1 + days, 0, 0, 0, milliseconds));
      } else {
        value = new Date(1900, 0, 1 + days, 0, 0, 0, milliseconds);
      }
      callback(value);
    });
  });
}
function readTime(parser, dataLength, scale, useUTC, callback) {
  let readValue;
  switch (dataLength) {
    case 3:
      readValue = parser.readUInt24LE;
      break;
    case 4:
      readValue = parser.readUInt32LE;
      break;
    case 5:
      readValue = parser.readUInt40LE;
  }
  readValue.call(parser, value => {
    if (scale < 7) {
      for (let i = scale; i < 7; i++) {
        value *= 10;
      }
    }
    let date;
    if (useUTC) {
      date = new Date(Date.UTC(1970, 0, 1, 0, 0, 0, value / 10000));
    } else {
      date = new Date(1970, 0, 1, 0, 0, 0, value / 10000);
    }
    Object.defineProperty(date, 'nanosecondsDelta', {
      enumerable: false,
      value: value % 10000 / Math.pow(10, 7)
    });
    callback(date);
  });
}
function readDate(parser, useUTC, callback) {
  parser.readUInt24LE(days => {
    if (useUTC) {
      callback(new Date(Date.UTC(2000, 0, days - 730118)));
    } else {
      callback(new Date(2000, 0, days - 730118));
    }
  });
}
function readDateTime2(parser, dataLength, scale, useUTC, callback) {
  readTime(parser, dataLength - 3, scale, useUTC, time => {
    // TODO: 'input' is 'time', but TypeScript cannot find "time.nanosecondsDelta";
    parser.readUInt24LE(days => {
      let date;
      if (useUTC) {
        date = new Date(Date.UTC(2000, 0, days - 730118, 0, 0, 0, +time));
      } else {
        date = new Date(2000, 0, days - 730118, time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds());
      }
      Object.defineProperty(date, 'nanosecondsDelta', {
        enumerable: false,
        value: time.nanosecondsDelta
      });
      callback(date);
    });
  });
}
function readDateTimeOffset(parser, dataLength, scale, callback) {
  readTime(parser, dataLength - 5, scale, true, time => {
    parser.readUInt24LE(days => {
      // offset
      parser.readInt16LE(() => {
        const date = new Date(Date.UTC(2000, 0, days - 730118, 0, 0, 0, +time));
        Object.defineProperty(date, 'nanosecondsDelta', {
          enumerable: false,
          value: time.nanosecondsDelta
        });
        callback(date);
      });
    });
  });
}
var _default = valueParse;
exports.default = _default;
module.exports = valueParse;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbWV0YWRhdGFQYXJzZXIiLCJyZXF1aXJlIiwiX2RhdGFUeXBlIiwiX2ljb252TGl0ZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfc3ByaW50ZkpzIiwiX2d1aWRQYXJzZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIk5VTEwiLCJNQVgiLCJUSFJFRV9BTkRfQV9USElSRCIsIk1PTkVZX0RJVklTT1IiLCJQTFBfTlVMTCIsIkJ1ZmZlciIsImZyb20iLCJVTktOT1dOX1BMUF9MRU4iLCJERUZBVUxUX0VOQ09ESU5HIiwicmVhZFRpbnlJbnQiLCJwYXJzZXIiLCJjYWxsYmFjayIsInJlYWRVSW50OCIsInJlYWRTbWFsbEludCIsInJlYWRJbnQxNkxFIiwicmVhZEludCIsInJlYWRJbnQzMkxFIiwicmVhZEJpZ0ludCIsInJlYWRCaWdJbnQ2NExFIiwidmFsdWUiLCJ0b1N0cmluZyIsInJlYWRSZWFsIiwicmVhZEZsb2F0TEUiLCJyZWFkRmxvYXQiLCJyZWFkRG91YmxlTEUiLCJyZWFkU21hbGxNb25leSIsInJlYWRNb25leSIsImhpZ2giLCJyZWFkVUludDMyTEUiLCJsb3ciLCJyZWFkQml0IiwidmFsdWVQYXJzZSIsIm1ldGFkYXRhIiwib3B0aW9ucyIsInR5cGUiLCJuYW1lIiwiZGF0YUxlbmd0aCIsIkVycm9yIiwiY29kZXBhZ2UiLCJjb2xsYXRpb24iLCJyZWFkTWF4Q2hhcnMiLCJyZWFkVUludDE2TEUiLCJyZWFkQ2hhcnMiLCJyZWFkTWF4TkNoYXJzIiwicmVhZE5DaGFycyIsInJlYWRNYXhCaW5hcnkiLCJyZWFkQmluYXJ5IiwidGV4dFBvaW50ZXJMZW5ndGgiLCJyZWFkQnVmZmVyIiwiX3RleHRQb2ludGVyIiwiX3RpbWVzdGFtcCIsInJlYWRTbWFsbERhdGVUaW1lIiwidXNlVVRDIiwicmVhZERhdGVUaW1lIiwicmVhZFRpbWUiLCJzY2FsZSIsInJlYWREYXRlIiwicmVhZERhdGVUaW1lMiIsInJlYWREYXRlVGltZU9mZnNldCIsInJlYWROdW1lcmljIiwicHJlY2lzaW9uIiwicmVhZFVuaXF1ZUlkZW50aWZpZXIiLCJzcHJpbnRmIiwicmVhZFZhcmlhbnQiLCJkYXRhIiwibG93ZXJDYXNlR3VpZHMiLCJidWZmZXJUb0xvd2VyQ2FzZUd1aWQiLCJidWZmZXJUb1VwcGVyQ2FzZUd1aWQiLCJfcHJlY2lzaW9uIiwic2lnbiIsInJlYWRWYWx1ZSIsInJlYWRVTnVtZXJpYzY0TEUiLCJyZWFkVU51bWVyaWM5NkxFIiwicmVhZFVOdW1lcmljMTI4TEUiLCJjYWxsIiwiTWF0aCIsInBvdyIsImJhc2VUeXBlIiwiVFlQRSIsInByb3BCeXRlcyIsIl9tYXhMZW5ndGgiLCJyZWFkQ29sbGF0aW9uIiwiX2NvbGxhdGlvbiIsImljb252IiwiZGVjb2RlIiwicmVhZE1heCIsImVxdWFscyIsInJlYWRNYXhVbmtub3duTGVuZ3RoIiwiY29uc29sZSIsIndhcm4iLCJleHBlY3RlZExlbmd0aCIsInJlYWRNYXhLbm93bkxlbmd0aCIsInRvdGFsTGVuZ3RoIiwiYWxsb2MiLCJvZmZzZXQiLCJuZXh0IiwiZG9uZSIsImNodW5rTGVuZ3RoIiwiY2h1bmsiLCJjb3B5IiwiY2h1bmtzIiwibGVuZ3RoIiwicHVzaCIsImNvbmNhdCIsImRheXMiLCJtaW51dGVzIiwiRGF0ZSIsIlVUQyIsInRocmVlSHVuZHJlZHRoc09mU2Vjb25kIiwibWlsbGlzZWNvbmRzIiwicm91bmQiLCJyZWFkVUludDI0TEUiLCJyZWFkVUludDQwTEUiLCJpIiwiZGF0ZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsInRpbWUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiZ2V0TWlsbGlzZWNvbmRzIiwibmFub3NlY29uZHNEZWx0YSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsIm1vZHVsZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy92YWx1ZS1wYXJzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBhcnNlciwgeyBQYXJzZXJPcHRpb25zIH0gZnJvbSAnLi90b2tlbi9zdHJlYW0tcGFyc2VyJztcbmltcG9ydCB7IE1ldGFkYXRhLCByZWFkQ29sbGF0aW9uIH0gZnJvbSAnLi9tZXRhZGF0YS1wYXJzZXInO1xuaW1wb3J0IHsgVFlQRSB9IGZyb20gJy4vZGF0YS10eXBlJztcblxuaW1wb3J0IGljb252IGZyb20gJ2ljb252LWxpdGUnO1xuaW1wb3J0IHsgc3ByaW50ZiB9IGZyb20gJ3NwcmludGYtanMnO1xuaW1wb3J0IHsgYnVmZmVyVG9Mb3dlckNhc2VHdWlkLCBidWZmZXJUb1VwcGVyQ2FzZUd1aWQgfSBmcm9tICcuL2d1aWQtcGFyc2VyJztcblxuY29uc3QgTlVMTCA9ICgxIDw8IDE2KSAtIDE7XG5jb25zdCBNQVggPSAoMSA8PCAxNikgLSAxO1xuY29uc3QgVEhSRUVfQU5EX0FfVEhJUkQgPSAzICsgKDEgLyAzKTtcbmNvbnN0IE1PTkVZX0RJVklTT1IgPSAxMDAwMDtcbmNvbnN0IFBMUF9OVUxMID0gQnVmZmVyLmZyb20oWzB4RkYsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkZdKTtcbmNvbnN0IFVOS05PV05fUExQX0xFTiA9IEJ1ZmZlci5mcm9tKFsweEZFLCAweEZGLCAweEZGLCAweEZGLCAweEZGLCAweEZGLCAweEZGLCAweEZGXSk7XG5jb25zdCBERUZBVUxUX0VOQ09ESU5HID0gJ3V0ZjgnO1xuXG5mdW5jdGlvbiByZWFkVGlueUludChwYXJzZXI6IFBhcnNlciwgY2FsbGJhY2s6ICh2YWx1ZTogdW5rbm93bikgPT4gdm9pZCkge1xuICBwYXJzZXIucmVhZFVJbnQ4KGNhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gcmVhZFNtYWxsSW50KHBhcnNlcjogUGFyc2VyLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIHBhcnNlci5yZWFkSW50MTZMRShjYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIHJlYWRJbnQocGFyc2VyOiBQYXJzZXIsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRJbnQzMkxFKGNhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gcmVhZEJpZ0ludChwYXJzZXI6IFBhcnNlciwgY2FsbGJhY2s6ICh2YWx1ZTogdW5rbm93bikgPT4gdm9pZCkge1xuICBwYXJzZXIucmVhZEJpZ0ludDY0TEUoKHZhbHVlKSA9PiB7XG4gICAgY2FsbGJhY2sodmFsdWUudG9TdHJpbmcoKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkUmVhbChwYXJzZXI6IFBhcnNlciwgY2FsbGJhY2s6ICh2YWx1ZTogdW5rbm93bikgPT4gdm9pZCkge1xuICBwYXJzZXIucmVhZEZsb2F0TEUoY2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiByZWFkRmxvYXQocGFyc2VyOiBQYXJzZXIsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWREb3VibGVMRShjYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIHJlYWRTbWFsbE1vbmV5KHBhcnNlcjogUGFyc2VyLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIHBhcnNlci5yZWFkSW50MzJMRSgodmFsdWUpID0+IHtcbiAgICBjYWxsYmFjayh2YWx1ZSAvIE1PTkVZX0RJVklTT1IpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVhZE1vbmV5KHBhcnNlcjogUGFyc2VyLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIHBhcnNlci5yZWFkSW50MzJMRSgoaGlnaCkgPT4ge1xuICAgIHBhcnNlci5yZWFkVUludDMyTEUoKGxvdykgPT4ge1xuICAgICAgY2FsbGJhY2soKGxvdyArICgweDEwMDAwMDAwMCAqIGhpZ2gpKSAvIE1PTkVZX0RJVklTT1IpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVhZEJpdChwYXJzZXI6IFBhcnNlciwgY2FsbGJhY2s6ICh2YWx1ZTogdW5rbm93bikgPT4gdm9pZCkge1xuICBwYXJzZXIucmVhZFVJbnQ4KCh2YWx1ZSkgPT4ge1xuICAgIGNhbGxiYWNrKCEhdmFsdWUpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdmFsdWVQYXJzZShwYXJzZXI6IFBhcnNlciwgbWV0YWRhdGE6IE1ldGFkYXRhLCBvcHRpb25zOiBQYXJzZXJPcHRpb25zLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKTogdm9pZCB7XG4gIGNvbnN0IHR5cGUgPSBtZXRhZGF0YS50eXBlO1xuXG4gIHN3aXRjaCAodHlwZS5uYW1lKSB7XG4gICAgY2FzZSAnTnVsbCc6XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG5cbiAgICBjYXNlICdUaW55SW50JzpcbiAgICAgIHJldHVybiByZWFkVGlueUludChwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgIGNhc2UgJ1NtYWxsSW50JzpcbiAgICAgIHJldHVybiByZWFkU21hbGxJbnQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICBjYXNlICdJbnQnOlxuICAgICAgcmV0dXJuIHJlYWRJbnQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICBjYXNlICdCaWdJbnQnOlxuICAgICAgcmV0dXJuIHJlYWRCaWdJbnQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICBjYXNlICdJbnROJzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZGF0YUxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiByZWFkVGlueUludChwYXJzZXIsIGNhbGxiYWNrKTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gcmVhZFNtYWxsSW50KHBhcnNlciwgY2FsbGJhY2spO1xuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiByZWFkSW50KHBhcnNlciwgY2FsbGJhY2spO1xuICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiByZWFkQmlnSW50KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZGF0YUxlbmd0aCAnICsgZGF0YUxlbmd0aCArICcgZm9yIEludE4nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBjYXNlICdSZWFsJzpcbiAgICAgIHJldHVybiByZWFkUmVhbChwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgIGNhc2UgJ0Zsb2F0JzpcbiAgICAgIHJldHVybiByZWFkRmxvYXQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICBjYXNlICdGbG9hdE4nOlxuICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKGRhdGFMZW5ndGgpID0+IHtcbiAgICAgICAgc3dpdGNoIChkYXRhTGVuZ3RoKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuXG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIHJlYWRSZWFsKHBhcnNlciwgY2FsbGJhY2spO1xuICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiByZWFkRmxvYXQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBkYXRhTGVuZ3RoICcgKyBkYXRhTGVuZ3RoICsgJyBmb3IgRmxvYXROJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnU21hbGxNb25leSc6XG4gICAgICByZXR1cm4gcmVhZFNtYWxsTW9uZXkocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICBjYXNlICdNb25leSc6XG4gICAgICByZXR1cm4gcmVhZE1vbmV5KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgY2FzZSAnTW9uZXlOJzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZGF0YUxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcblxuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiByZWFkU21hbGxNb25leShwYXJzZXIsIGNhbGxiYWNrKTtcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICByZXR1cm4gcmVhZE1vbmV5KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZGF0YUxlbmd0aCAnICsgZGF0YUxlbmd0aCArICcgZm9yIE1vbmV5TicpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ0JpdCc6XG4gICAgICByZXR1cm4gcmVhZEJpdChwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgIGNhc2UgJ0JpdE4nOlxuICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKGRhdGFMZW5ndGgpID0+IHtcbiAgICAgICAgc3dpdGNoIChkYXRhTGVuZ3RoKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIHJlYWRCaXQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBkYXRhTGVuZ3RoICcgKyBkYXRhTGVuZ3RoICsgJyBmb3IgQml0TicpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ1ZhckNoYXInOlxuICAgIGNhc2UgJ0NoYXInOlxuICAgICAgY29uc3QgY29kZXBhZ2UgPSBtZXRhZGF0YS5jb2xsYXRpb24hLmNvZGVwYWdlITtcbiAgICAgIGlmIChtZXRhZGF0YS5kYXRhTGVuZ3RoID09PSBNQVgpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRNYXhDaGFycyhwYXJzZXIsIGNvZGVwYWdlLCBjYWxsYmFjayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50MTZMRSgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICAgIGlmIChkYXRhTGVuZ3RoID09PSBOVUxMKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVhZENoYXJzKHBhcnNlciwgZGF0YUxlbmd0aCEsIGNvZGVwYWdlLCBjYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgY2FzZSAnTlZhckNoYXInOlxuICAgIGNhc2UgJ05DaGFyJzpcbiAgICAgIGlmIChtZXRhZGF0YS5kYXRhTGVuZ3RoID09PSBNQVgpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRNYXhOQ2hhcnMocGFyc2VyLCBjYWxsYmFjayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50MTZMRSgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICAgIGlmIChkYXRhTGVuZ3RoID09PSBOVUxMKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVhZE5DaGFycyhwYXJzZXIsIGRhdGFMZW5ndGghLCBjYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgY2FzZSAnVmFyQmluYXJ5JzpcbiAgICBjYXNlICdCaW5hcnknOlxuICAgICAgaWYgKG1ldGFkYXRhLmRhdGFMZW5ndGggPT09IE1BWCkge1xuICAgICAgICByZXR1cm4gcmVhZE1heEJpbmFyeShwYXJzZXIsIGNhbGxiYWNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQxNkxFKChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgICAgaWYgKGRhdGFMZW5ndGggPT09IE5VTEwpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZWFkQmluYXJ5KHBhcnNlciwgZGF0YUxlbmd0aCEsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICBjYXNlICdUZXh0JzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KCh0ZXh0UG9pbnRlckxlbmd0aCkgPT4ge1xuICAgICAgICBpZiAodGV4dFBvaW50ZXJMZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBwYXJzZXIucmVhZEJ1ZmZlcih0ZXh0UG9pbnRlckxlbmd0aCwgKF90ZXh0UG9pbnRlcikgPT4ge1xuICAgICAgICAgIHBhcnNlci5yZWFkQnVmZmVyKDgsIChfdGltZXN0YW1wKSA9PiB7XG4gICAgICAgICAgICBwYXJzZXIucmVhZFVJbnQzMkxFKChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgICAgICAgIHJlYWRDaGFycyhwYXJzZXIsIGRhdGFMZW5ndGghLCBtZXRhZGF0YS5jb2xsYXRpb24hLmNvZGVwYWdlISwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICBjYXNlICdOVGV4dCc6XG4gICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50OCgodGV4dFBvaW50ZXJMZW5ndGgpID0+IHtcbiAgICAgICAgaWYgKHRleHRQb2ludGVyTGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyc2VyLnJlYWRCdWZmZXIodGV4dFBvaW50ZXJMZW5ndGgsIChfdGV4dFBvaW50ZXIpID0+IHtcbiAgICAgICAgICBwYXJzZXIucmVhZEJ1ZmZlcig4LCAoX3RpbWVzdGFtcCkgPT4ge1xuICAgICAgICAgICAgcGFyc2VyLnJlYWRVSW50MzJMRSgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICAgICAgICByZWFkTkNoYXJzKHBhcnNlciwgZGF0YUxlbmd0aCEsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnSW1hZ2UnOlxuICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKHRleHRQb2ludGVyTGVuZ3RoKSA9PiB7XG4gICAgICAgIGlmICh0ZXh0UG9pbnRlckxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnNlci5yZWFkQnVmZmVyKHRleHRQb2ludGVyTGVuZ3RoLCAoX3RleHRQb2ludGVyKSA9PiB7XG4gICAgICAgICAgcGFyc2VyLnJlYWRCdWZmZXIoOCwgKF90aW1lc3RhbXApID0+IHtcbiAgICAgICAgICAgIHBhcnNlci5yZWFkVUludDMyTEUoKGRhdGFMZW5ndGgpID0+IHtcbiAgICAgICAgICAgICAgcmVhZEJpbmFyeShwYXJzZXIsIGRhdGFMZW5ndGghLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ1htbCc6XG4gICAgICByZXR1cm4gcmVhZE1heE5DaGFycyhwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgIGNhc2UgJ1NtYWxsRGF0ZVRpbWUnOlxuICAgICAgcmV0dXJuIHJlYWRTbWFsbERhdGVUaW1lKHBhcnNlciwgb3B0aW9ucy51c2VVVEMsIGNhbGxiYWNrKTtcblxuICAgIGNhc2UgJ0RhdGVUaW1lJzpcbiAgICAgIHJldHVybiByZWFkRGF0ZVRpbWUocGFyc2VyLCBvcHRpb25zLnVzZVVUQywgY2FsbGJhY2spO1xuXG4gICAgY2FzZSAnRGF0ZVRpbWVOJzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZGF0YUxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcblxuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiByZWFkU21hbGxEYXRlVGltZShwYXJzZXIsIG9wdGlvbnMudXNlVVRDLCBjYWxsYmFjayk7XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIHJlYWREYXRlVGltZShwYXJzZXIsIG9wdGlvbnMudXNlVVRDLCBjYWxsYmFjayk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBkYXRhTGVuZ3RoICcgKyBkYXRhTGVuZ3RoICsgJyBmb3IgRGF0ZVRpbWVOJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnVGltZSc6XG4gICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50OCgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICBpZiAoZGF0YUxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcmVhZFRpbWUocGFyc2VyLCBkYXRhTGVuZ3RoISwgbWV0YWRhdGEuc2NhbGUhLCBvcHRpb25zLnVzZVVUQywgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ0RhdGUnOlxuICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKGRhdGFMZW5ndGgpID0+IHtcbiAgICAgICAgaWYgKGRhdGFMZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlYWREYXRlKHBhcnNlciwgb3B0aW9ucy51c2VVVEMsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBjYXNlICdEYXRlVGltZTInOlxuICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKGRhdGFMZW5ndGgpID0+IHtcbiAgICAgICAgaWYgKGRhdGFMZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlYWREYXRlVGltZTIocGFyc2VyLCBkYXRhTGVuZ3RoISwgbWV0YWRhdGEuc2NhbGUhLCBvcHRpb25zLnVzZVVUQywgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ0RhdGVUaW1lT2Zmc2V0JzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgIGlmIChkYXRhTGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiByZWFkRGF0ZVRpbWVPZmZzZXQocGFyc2VyLCBkYXRhTGVuZ3RoISwgbWV0YWRhdGEuc2NhbGUhLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnTnVtZXJpY04nOlxuICAgIGNhc2UgJ0RlY2ltYWxOJzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgIGlmIChkYXRhTGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiByZWFkTnVtZXJpYyhwYXJzZXIsIGRhdGFMZW5ndGghLCBtZXRhZGF0YS5wcmVjaXNpb24hLCBtZXRhZGF0YS5zY2FsZSEsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBjYXNlICdVbmlxdWVJZGVudGlmaWVyJzpcbiAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQ4KChkYXRhTGVuZ3RoKSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZGF0YUxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcblxuICAgICAgICAgIGNhc2UgMHgxMDpcbiAgICAgICAgICAgIHJldHVybiByZWFkVW5pcXVlSWRlbnRpZmllcihwYXJzZXIsIG9wdGlvbnMsIGNhbGxiYWNrKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Ioc3ByaW50ZignVW5zdXBwb3J0ZWQgZ3VpZCBzaXplICVkJywgZGF0YUxlbmd0aCEgLSAxKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnVURUJzpcbiAgICAgIHJldHVybiByZWFkTWF4QmluYXJ5KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgY2FzZSAnVmFyaWFudCc6XG4gICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50MzJMRSgoZGF0YUxlbmd0aCkgPT4ge1xuICAgICAgICBpZiAoZGF0YUxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlYWRWYXJpYW50KHBhcnNlciwgb3B0aW9ucywgZGF0YUxlbmd0aCEsIGNhbGxiYWNrKTtcbiAgICAgIH0pO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihzcHJpbnRmKCdVbnJlY29nbmlzZWQgdHlwZSAlcycsIHR5cGUubmFtZSkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlYWRVbmlxdWVJZGVudGlmaWVyKHBhcnNlcjogUGFyc2VyLCBvcHRpb25zOiBQYXJzZXJPcHRpb25zLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIHBhcnNlci5yZWFkQnVmZmVyKDB4MTAsIChkYXRhKSA9PiB7XG4gICAgY2FsbGJhY2sob3B0aW9ucy5sb3dlckNhc2VHdWlkcyA/IGJ1ZmZlclRvTG93ZXJDYXNlR3VpZChkYXRhKSA6IGJ1ZmZlclRvVXBwZXJDYXNlR3VpZChkYXRhKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkTnVtZXJpYyhwYXJzZXI6IFBhcnNlciwgZGF0YUxlbmd0aDogbnVtYmVyLCBfcHJlY2lzaW9uOiBudW1iZXIsIHNjYWxlOiBudW1iZXIsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRVSW50OCgoc2lnbikgPT4ge1xuICAgIHNpZ24gPSBzaWduID09PSAxID8gMSA6IC0xO1xuXG4gICAgbGV0IHJlYWRWYWx1ZTtcbiAgICBpZiAoZGF0YUxlbmd0aCA9PT0gNSkge1xuICAgICAgcmVhZFZhbHVlID0gcGFyc2VyLnJlYWRVSW50MzJMRTtcbiAgICB9IGVsc2UgaWYgKGRhdGFMZW5ndGggPT09IDkpIHtcbiAgICAgIHJlYWRWYWx1ZSA9IHBhcnNlci5yZWFkVU51bWVyaWM2NExFO1xuICAgIH0gZWxzZSBpZiAoZGF0YUxlbmd0aCA9PT0gMTMpIHtcbiAgICAgIHJlYWRWYWx1ZSA9IHBhcnNlci5yZWFkVU51bWVyaWM5NkxFO1xuICAgIH0gZWxzZSBpZiAoZGF0YUxlbmd0aCA9PT0gMTcpIHtcbiAgICAgIHJlYWRWYWx1ZSA9IHBhcnNlci5yZWFkVU51bWVyaWMxMjhMRTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHNwcmludGYoJ1Vuc3VwcG9ydGVkIG51bWVyaWMgZGF0YUxlbmd0aCAlZCcsIGRhdGFMZW5ndGgpKTtcbiAgICB9XG5cbiAgICByZWFkVmFsdWUuY2FsbChwYXJzZXIsICh2YWx1ZSkgPT4ge1xuICAgICAgY2FsbGJhY2soKHZhbHVlICogc2lnbikgLyBNYXRoLnBvdygxMCwgc2NhbGUpKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRWYXJpYW50KHBhcnNlcjogUGFyc2VyLCBvcHRpb25zOiBQYXJzZXJPcHRpb25zLCBkYXRhTGVuZ3RoOiBudW1iZXIsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKGJhc2VUeXBlKSA9PiB7XG4gICAgY29uc3QgdHlwZSA9IFRZUEVbYmFzZVR5cGVdO1xuXG4gICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKHByb3BCeXRlcykgPT4ge1xuICAgICAgZGF0YUxlbmd0aCA9IGRhdGFMZW5ndGggLSBwcm9wQnl0ZXMgLSAyO1xuXG4gICAgICBzd2l0Y2ggKHR5cGUubmFtZSkge1xuICAgICAgICBjYXNlICdVbmlxdWVJZGVudGlmaWVyJzpcbiAgICAgICAgICByZXR1cm4gcmVhZFVuaXF1ZUlkZW50aWZpZXIocGFyc2VyLCBvcHRpb25zLCBjYWxsYmFjayk7XG5cbiAgICAgICAgY2FzZSAnQml0JzpcbiAgICAgICAgICByZXR1cm4gcmVhZEJpdChwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgICAgICBjYXNlICdUaW55SW50JzpcbiAgICAgICAgICByZXR1cm4gcmVhZFRpbnlJbnQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICAgICAgY2FzZSAnU21hbGxJbnQnOlxuICAgICAgICAgIHJldHVybiByZWFkU21hbGxJbnQocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICAgICAgY2FzZSAnSW50JzpcbiAgICAgICAgICByZXR1cm4gcmVhZEludChwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgICAgICBjYXNlICdCaWdJbnQnOlxuICAgICAgICAgIHJldHVybiByZWFkQmlnSW50KHBhcnNlciwgY2FsbGJhY2spO1xuXG4gICAgICAgIGNhc2UgJ1NtYWxsRGF0ZVRpbWUnOlxuICAgICAgICAgIHJldHVybiByZWFkU21hbGxEYXRlVGltZShwYXJzZXIsIG9wdGlvbnMudXNlVVRDLCBjYWxsYmFjayk7XG5cbiAgICAgICAgY2FzZSAnRGF0ZVRpbWUnOlxuICAgICAgICAgIHJldHVybiByZWFkRGF0ZVRpbWUocGFyc2VyLCBvcHRpb25zLnVzZVVUQywgY2FsbGJhY2spO1xuXG4gICAgICAgIGNhc2UgJ1JlYWwnOlxuICAgICAgICAgIHJldHVybiByZWFkUmVhbChwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgICAgICBjYXNlICdGbG9hdCc6XG4gICAgICAgICAgcmV0dXJuIHJlYWRGbG9hdChwYXJzZXIsIGNhbGxiYWNrKTtcblxuICAgICAgICBjYXNlICdTbWFsbE1vbmV5JzpcbiAgICAgICAgICByZXR1cm4gcmVhZFNtYWxsTW9uZXkocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICAgICAgY2FzZSAnTW9uZXknOlxuICAgICAgICAgIHJldHVybiByZWFkTW9uZXkocGFyc2VyLCBjYWxsYmFjayk7XG5cbiAgICAgICAgY2FzZSAnRGF0ZSc6XG4gICAgICAgICAgcmV0dXJuIHJlYWREYXRlKHBhcnNlciwgb3B0aW9ucy51c2VVVEMsIGNhbGxiYWNrKTtcblxuICAgICAgICBjYXNlICdUaW1lJzpcbiAgICAgICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50OCgoc2NhbGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZWFkVGltZShwYXJzZXIsIGRhdGFMZW5ndGgsIHNjYWxlLCBvcHRpb25zLnVzZVVUQywgY2FsbGJhY2spO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhc2UgJ0RhdGVUaW1lMic6XG4gICAgICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKHNjYWxlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZERhdGVUaW1lMihwYXJzZXIsIGRhdGFMZW5ndGgsIHNjYWxlLCBvcHRpb25zLnVzZVVUQywgY2FsbGJhY2spO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhc2UgJ0RhdGVUaW1lT2Zmc2V0JzpcbiAgICAgICAgICByZXR1cm4gcGFyc2VyLnJlYWRVSW50OCgoc2NhbGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZWFkRGF0ZVRpbWVPZmZzZXQocGFyc2VyLCBkYXRhTGVuZ3RoLCBzY2FsZSwgY2FsbGJhY2spO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhc2UgJ1ZhckJpbmFyeSc6XG4gICAgICAgIGNhc2UgJ0JpbmFyeSc6XG4gICAgICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDE2TEUoKF9tYXhMZW5ndGgpID0+IHtcbiAgICAgICAgICAgIHJlYWRCaW5hcnkocGFyc2VyLCBkYXRhTGVuZ3RoLCBjYWxsYmFjayk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgY2FzZSAnTnVtZXJpY04nOlxuICAgICAgICBjYXNlICdEZWNpbWFsTic6XG4gICAgICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDgoKHByZWNpc2lvbikgPT4ge1xuICAgICAgICAgICAgcGFyc2VyLnJlYWRVSW50OCgoc2NhbGUpID0+IHtcbiAgICAgICAgICAgICAgcmVhZE51bWVyaWMocGFyc2VyLCBkYXRhTGVuZ3RoLCBwcmVjaXNpb24sIHNjYWxlLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICBjYXNlICdWYXJDaGFyJzpcbiAgICAgICAgY2FzZSAnQ2hhcic6XG4gICAgICAgICAgcmV0dXJuIHBhcnNlci5yZWFkVUludDE2TEUoKF9tYXhMZW5ndGgpID0+IHtcbiAgICAgICAgICAgIHJlYWRDb2xsYXRpb24ocGFyc2VyLCAoY29sbGF0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIHJlYWRDaGFycyhwYXJzZXIsIGRhdGFMZW5ndGgsIGNvbGxhdGlvbi5jb2RlcGFnZSEsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhc2UgJ05WYXJDaGFyJzpcbiAgICAgICAgY2FzZSAnTkNoYXInOlxuICAgICAgICAgIHJldHVybiBwYXJzZXIucmVhZFVJbnQxNkxFKChfbWF4TGVuZ3RoKSA9PiB7XG4gICAgICAgICAgICByZWFkQ29sbGF0aW9uKHBhcnNlciwgKF9jb2xsYXRpb24pID0+IHtcbiAgICAgICAgICAgICAgcmVhZE5DaGFycyhwYXJzZXIsIGRhdGFMZW5ndGgsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHR5cGUhJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkQmluYXJ5KHBhcnNlcjogUGFyc2VyLCBkYXRhTGVuZ3RoOiBudW1iZXIsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgcmV0dXJuIHBhcnNlci5yZWFkQnVmZmVyKGRhdGFMZW5ndGgsIGNhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gcmVhZENoYXJzKHBhcnNlcjogUGFyc2VyLCBkYXRhTGVuZ3RoOiBudW1iZXIsIGNvZGVwYWdlOiBzdHJpbmcsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgaWYgKGNvZGVwYWdlID09IG51bGwpIHtcbiAgICBjb2RlcGFnZSA9IERFRkFVTFRfRU5DT0RJTkc7XG4gIH1cblxuICByZXR1cm4gcGFyc2VyLnJlYWRCdWZmZXIoZGF0YUxlbmd0aCwgKGRhdGEpID0+IHtcbiAgICBjYWxsYmFjayhpY29udi5kZWNvZGUoZGF0YSwgY29kZXBhZ2UpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYWROQ2hhcnMocGFyc2VyOiBQYXJzZXIsIGRhdGFMZW5ndGg6IG51bWJlciwgY2FsbGJhY2s6ICh2YWx1ZTogdW5rbm93bikgPT4gdm9pZCkge1xuICBwYXJzZXIucmVhZEJ1ZmZlcihkYXRhTGVuZ3RoLCAoZGF0YSkgPT4ge1xuICAgIGNhbGxiYWNrKGRhdGEudG9TdHJpbmcoJ3VjczInKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkTWF4QmluYXJ5KHBhcnNlcjogUGFyc2VyLCBjYWxsYmFjazogKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkKSB7XG4gIHJldHVybiByZWFkTWF4KHBhcnNlciwgY2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiByZWFkTWF4Q2hhcnMocGFyc2VyOiBQYXJzZXIsIGNvZGVwYWdlOiBzdHJpbmcsIGNhbGxiYWNrOiAodmFsdWU6IHVua25vd24pID0+IHZvaWQpIHtcbiAgaWYgKGNvZGVwYWdlID09IG51bGwpIHtcbiAgICBjb2RlcGFnZSA9IERFRkFVTFRfRU5DT0RJTkc7XG4gIH1cblxuICByZWFkTWF4KHBhcnNlciwgKGRhdGEpID0+IHtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgY2FsbGJhY2soaWNvbnYuZGVjb2RlKGRhdGEsIGNvZGVwYWdlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRNYXhOQ2hhcnMocGFyc2VyOiBQYXJzZXIsIGNhbGxiYWNrOiAodmFsdWU6IHN0cmluZyB8IG51bGwpID0+IHZvaWQpIHtcbiAgcmVhZE1heChwYXJzZXIsIChkYXRhKSA9PiB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGNhbGxiYWNrKGRhdGEudG9TdHJpbmcoJ3VjczInKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRNYXgocGFyc2VyOiBQYXJzZXIsIGNhbGxiYWNrOiAodmFsdWU6IG51bGwgfCBCdWZmZXIpID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRCdWZmZXIoOCwgKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZS5lcXVhbHMoUExQX05VTEwpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgfSBlbHNlIGlmICh0eXBlLmVxdWFscyhVTktOT1dOX1BMUF9MRU4pKSB7XG4gICAgICByZXR1cm4gcmVhZE1heFVua25vd25MZW5ndGgocGFyc2VyLCBjYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGxvdyA9IHR5cGUucmVhZFVJbnQzMkxFKDApO1xuICAgICAgY29uc3QgaGlnaCA9IHR5cGUucmVhZFVJbnQzMkxFKDQpO1xuXG4gICAgICBpZiAoaGlnaCA+PSAoMiA8PCAoNTMgLSAzMikpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignUmVhZCBVSW50NjRMRSA+IDUzIGJpdHMgOiBoaWdoPScgKyBoaWdoICsgJywgbG93PScgKyBsb3cpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBleHBlY3RlZExlbmd0aCA9IGxvdyArICgweDEwMDAwMDAwMCAqIGhpZ2gpO1xuICAgICAgcmV0dXJuIHJlYWRNYXhLbm93bkxlbmd0aChwYXJzZXIsIGV4cGVjdGVkTGVuZ3RoLCBjYWxsYmFjayk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVhZE1heEtub3duTGVuZ3RoKHBhcnNlcjogUGFyc2VyLCB0b3RhbExlbmd0aDogbnVtYmVyLCBjYWxsYmFjazogKHZhbHVlOiBudWxsIHwgQnVmZmVyKSA9PiB2b2lkKSB7XG4gIGNvbnN0IGRhdGEgPSBCdWZmZXIuYWxsb2ModG90YWxMZW5ndGgsIDApO1xuXG4gIGxldCBvZmZzZXQgPSAwO1xuICBmdW5jdGlvbiBuZXh0KGRvbmU6IGFueSkge1xuICAgIHBhcnNlci5yZWFkVUludDMyTEUoKGNodW5rTGVuZ3RoKSA9PiB7XG4gICAgICBpZiAoIWNodW5rTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBkb25lKCk7XG4gICAgICB9XG5cbiAgICAgIHBhcnNlci5yZWFkQnVmZmVyKGNodW5rTGVuZ3RoLCAoY2h1bmspID0+IHtcbiAgICAgICAgY2h1bmsuY29weShkYXRhLCBvZmZzZXQpO1xuICAgICAgICBvZmZzZXQgKz0gY2h1bmtMZW5ndGg7XG5cbiAgICAgICAgbmV4dChkb25lKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgbmV4dCgoKSA9PiB7XG4gICAgaWYgKG9mZnNldCAhPT0gdG90YWxMZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUGFydGlhbGx5IExlbmd0aC1wcmVmaXhlZCBCeXRlcyB1bm1hdGNoZWQgbGVuZ3RocyA6IGV4cGVjdGVkICcgKyB0b3RhbExlbmd0aCArICcsIGJ1dCBnb3QgJyArIG9mZnNldCArICcgYnl0ZXMnKTtcbiAgICB9XG5cbiAgICBjYWxsYmFjayhkYXRhKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRNYXhVbmtub3duTGVuZ3RoKHBhcnNlcjogUGFyc2VyLCBjYWxsYmFjazogKHZhbHVlOiBudWxsIHwgQnVmZmVyKSA9PiB2b2lkKSB7XG4gIGNvbnN0IGNodW5rczogQnVmZmVyW10gPSBbXTtcblxuICBsZXQgbGVuZ3RoID0gMDtcbiAgZnVuY3Rpb24gbmV4dChkb25lOiBhbnkpIHtcbiAgICBwYXJzZXIucmVhZFVJbnQzMkxFKChjaHVua0xlbmd0aCkgPT4ge1xuICAgICAgaWYgKCFjaHVua0xlbmd0aCkge1xuICAgICAgICByZXR1cm4gZG9uZSgpO1xuICAgICAgfVxuXG4gICAgICBwYXJzZXIucmVhZEJ1ZmZlcihjaHVua0xlbmd0aCwgKGNodW5rKSA9PiB7XG4gICAgICAgIGNodW5rcy5wdXNoKGNodW5rKTtcbiAgICAgICAgbGVuZ3RoICs9IGNodW5rTGVuZ3RoO1xuXG4gICAgICAgIG5leHQoZG9uZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIG5leHQoKCkgPT4ge1xuICAgIGNhbGxiYWNrKEJ1ZmZlci5jb25jYXQoY2h1bmtzLCBsZW5ndGgpKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRTbWFsbERhdGVUaW1lKHBhcnNlcjogUGFyc2VyLCB1c2VVVEM6IGJvb2xlYW4sIGNhbGxiYWNrOiAodmFsdWU6IERhdGUpID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRVSW50MTZMRSgoZGF5cykgPT4ge1xuICAgIHBhcnNlci5yZWFkVUludDE2TEUoKG1pbnV0ZXMpID0+IHtcbiAgICAgIGxldCB2YWx1ZTtcbiAgICAgIGlmICh1c2VVVEMpIHtcbiAgICAgICAgdmFsdWUgPSBuZXcgRGF0ZShEYXRlLlVUQygxOTAwLCAwLCAxICsgZGF5cywgMCwgbWludXRlcykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBuZXcgRGF0ZSgxOTAwLCAwLCAxICsgZGF5cywgMCwgbWludXRlcyk7XG4gICAgICB9XG4gICAgICBjYWxsYmFjayh2YWx1ZSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkRGF0ZVRpbWUocGFyc2VyOiBQYXJzZXIsIHVzZVVUQzogYm9vbGVhbiwgY2FsbGJhY2s6ICh2YWx1ZTogRGF0ZSkgPT4gdm9pZCkge1xuICBwYXJzZXIucmVhZEludDMyTEUoKGRheXMpID0+IHtcbiAgICBwYXJzZXIucmVhZFVJbnQzMkxFKCh0aHJlZUh1bmRyZWR0aHNPZlNlY29uZCkgPT4ge1xuICAgICAgY29uc3QgbWlsbGlzZWNvbmRzID0gTWF0aC5yb3VuZCh0aHJlZUh1bmRyZWR0aHNPZlNlY29uZCAqIFRIUkVFX0FORF9BX1RISVJEKTtcblxuICAgICAgbGV0IHZhbHVlO1xuICAgICAgaWYgKHVzZVVUQykge1xuICAgICAgICB2YWx1ZSA9IG5ldyBEYXRlKERhdGUuVVRDKDE5MDAsIDAsIDEgKyBkYXlzLCAwLCAwLCAwLCBtaWxsaXNlY29uZHMpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gbmV3IERhdGUoMTkwMCwgMCwgMSArIGRheXMsIDAsIDAsIDAsIG1pbGxpc2Vjb25kcyk7XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrKHZhbHVlKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmludGVyZmFjZSBEYXRlV2l0aE5hbm9zZWNvbmRzRGVsdGEgZXh0ZW5kcyBEYXRlIHtcbiAgbmFub3NlY29uZHNEZWx0YTogbnVtYmVyO1xufVxuXG5mdW5jdGlvbiByZWFkVGltZShwYXJzZXI6IFBhcnNlciwgZGF0YUxlbmd0aDogbnVtYmVyLCBzY2FsZTogbnVtYmVyLCB1c2VVVEM6IGJvb2xlYW4sIGNhbGxiYWNrOiAodmFsdWU6IERhdGVXaXRoTmFub3NlY29uZHNEZWx0YSkgPT4gdm9pZCkge1xuICBsZXQgcmVhZFZhbHVlOiBhbnk7XG4gIHN3aXRjaCAoZGF0YUxlbmd0aCkge1xuICAgIGNhc2UgMzpcbiAgICAgIHJlYWRWYWx1ZSA9IHBhcnNlci5yZWFkVUludDI0TEU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ6XG4gICAgICByZWFkVmFsdWUgPSBwYXJzZXIucmVhZFVJbnQzMkxFO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA1OlxuICAgICAgcmVhZFZhbHVlID0gcGFyc2VyLnJlYWRVSW50NDBMRTtcbiAgfVxuXG4gIHJlYWRWYWx1ZSEuY2FsbChwYXJzZXIsICh2YWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgaWYgKHNjYWxlIDwgNykge1xuICAgICAgZm9yIChsZXQgaSA9IHNjYWxlOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgIHZhbHVlICo9IDEwO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBkYXRlO1xuICAgIGlmICh1c2VVVEMpIHtcbiAgICAgIGRhdGUgPSBuZXcgRGF0ZShEYXRlLlVUQygxOTcwLCAwLCAxLCAwLCAwLCAwLCB2YWx1ZSAvIDEwMDAwKSkgYXMgRGF0ZVdpdGhOYW5vc2Vjb25kc0RlbHRhO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRlID0gbmV3IERhdGUoMTk3MCwgMCwgMSwgMCwgMCwgMCwgdmFsdWUgLyAxMDAwMCkgYXMgRGF0ZVdpdGhOYW5vc2Vjb25kc0RlbHRhO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGF0ZSwgJ25hbm9zZWNvbmRzRGVsdGEnLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHZhbHVlOiAodmFsdWUgJSAxMDAwMCkgLyBNYXRoLnBvdygxMCwgNylcbiAgICB9KTtcbiAgICBjYWxsYmFjayhkYXRlKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYWREYXRlKHBhcnNlcjogUGFyc2VyLCB1c2VVVEM6IGJvb2xlYW4sIGNhbGxiYWNrOiAodmFsdWU6IERhdGUpID0+IHZvaWQpIHtcbiAgcGFyc2VyLnJlYWRVSW50MjRMRSgoZGF5cykgPT4ge1xuICAgIGlmICh1c2VVVEMpIHtcbiAgICAgIGNhbGxiYWNrKG5ldyBEYXRlKERhdGUuVVRDKDIwMDAsIDAsIGRheXMgLSA3MzAxMTgpKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKG5ldyBEYXRlKDIwMDAsIDAsIGRheXMgLSA3MzAxMTgpKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkRGF0ZVRpbWUyKHBhcnNlcjogUGFyc2VyLCBkYXRhTGVuZ3RoOiBudW1iZXIsIHNjYWxlOiBudW1iZXIsIHVzZVVUQzogYm9vbGVhbiwgY2FsbGJhY2s6ICh2YWx1ZTogRGF0ZVdpdGhOYW5vc2Vjb25kc0RlbHRhKSA9PiB2b2lkKSB7XG4gIHJlYWRUaW1lKHBhcnNlciwgZGF0YUxlbmd0aCAtIDMsIHNjYWxlLCB1c2VVVEMsICh0aW1lKSA9PiB7IC8vIFRPRE86ICdpbnB1dCcgaXMgJ3RpbWUnLCBidXQgVHlwZVNjcmlwdCBjYW5ub3QgZmluZCBcInRpbWUubmFub3NlY29uZHNEZWx0YVwiO1xuICAgIHBhcnNlci5yZWFkVUludDI0TEUoKGRheXMpID0+IHtcbiAgICAgIGxldCBkYXRlO1xuICAgICAgaWYgKHVzZVVUQykge1xuICAgICAgICBkYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMoMjAwMCwgMCwgZGF5cyAtIDczMDExOCwgMCwgMCwgMCwgK3RpbWUpKSBhcyBEYXRlV2l0aE5hbm9zZWNvbmRzRGVsdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRlID0gbmV3IERhdGUoMjAwMCwgMCwgZGF5cyAtIDczMDExOCwgdGltZS5nZXRIb3VycygpLCB0aW1lLmdldE1pbnV0ZXMoKSwgdGltZS5nZXRTZWNvbmRzKCksIHRpbWUuZ2V0TWlsbGlzZWNvbmRzKCkpIGFzIERhdGVXaXRoTmFub3NlY29uZHNEZWx0YTtcbiAgICAgIH1cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkYXRlLCAnbmFub3NlY29uZHNEZWx0YScsIHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiB0aW1lLm5hbm9zZWNvbmRzRGVsdGFcbiAgICAgIH0pO1xuICAgICAgY2FsbGJhY2soZGF0ZSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkRGF0ZVRpbWVPZmZzZXQocGFyc2VyOiBQYXJzZXIsIGRhdGFMZW5ndGg6IG51bWJlciwgc2NhbGU6IG51bWJlciwgY2FsbGJhY2s6ICh2YWx1ZTogRGF0ZVdpdGhOYW5vc2Vjb25kc0RlbHRhKSA9PiB2b2lkKSB7XG4gIHJlYWRUaW1lKHBhcnNlciwgZGF0YUxlbmd0aCAtIDUsIHNjYWxlLCB0cnVlLCAodGltZSkgPT4ge1xuICAgIHBhcnNlci5yZWFkVUludDI0TEUoKGRheXMpID0+IHtcbiAgICAgIC8vIG9mZnNldFxuICAgICAgcGFyc2VyLnJlYWRJbnQxNkxFKCgpID0+IHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKDIwMDAsIDAsIGRheXMgLSA3MzAxMTgsIDAsIDAsIDAsICt0aW1lKSkgYXMgRGF0ZVdpdGhOYW5vc2Vjb25kc0RlbHRhO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGF0ZSwgJ25hbm9zZWNvbmRzRGVsdGEnLCB7XG4gICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgdmFsdWU6IHRpbWUubmFub3NlY29uZHNEZWx0YVxuICAgICAgICB9KTtcbiAgICAgICAgY2FsbGJhY2soZGF0ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHZhbHVlUGFyc2U7XG5tb2R1bGUuZXhw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