"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _token = require("./token");
var _metadataParser = _interopRequireDefault(require("../metadata-parser"));
var _valueParser = _interopRequireDefault(require("../value-parser"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
// s2.2.7.16

function returnParser(parser, options, callback) {
  parser.readUInt16LE(paramOrdinal => {
    parser.readBVarChar(paramName => {
      if (paramName.charAt(0) === '@') {
        paramName = paramName.slice(1);
      }

      // status
      parser.readUInt8(() => {
        (0, _metadataParser.default)(parser, options, metadata => {
          (0, _valueParser.default)(parser, metadata, options, value => {
            callback(new _token.ReturnValueToken({
              paramOrdinal: paramOrdinal,
              paramName: paramName,
              metadata: metadata,
              value: value
            }));
          });
        });
      });
    });
  });
}
var _default = returnParser;
exports.default = _default;
module.exports = returnParser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdG9rZW4iLCJyZXF1aXJlIiwiX21ldGFkYXRhUGFyc2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl92YWx1ZVBhcnNlciIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwicmV0dXJuUGFyc2VyIiwicGFyc2VyIiwib3B0aW9ucyIsImNhbGxiYWNrIiwicmVhZFVJbnQxNkxFIiwicGFyYW1PcmRpbmFsIiwicmVhZEJWYXJDaGFyIiwicGFyYW1OYW1lIiwiY2hhckF0Iiwic2xpY2UiLCJyZWFkVUludDgiLCJtZXRhZGF0YVBhcnNlIiwibWV0YWRhdGEiLCJ2YWx1ZVBhcnNlIiwidmFsdWUiLCJSZXR1cm5WYWx1ZVRva2VuIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwibW9kdWxlIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL3Rva2VuL3JldHVybnZhbHVlLXRva2VuLXBhcnNlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzMi4yLjcuMTZcblxuaW1wb3J0IFBhcnNlciwgeyBQYXJzZXJPcHRpb25zIH0gZnJvbSAnLi9zdHJlYW0tcGFyc2VyJztcblxuaW1wb3J0IHsgUmV0dXJuVmFsdWVUb2tlbiB9IGZyb20gJy4vdG9rZW4nO1xuXG5pbXBvcnQgbWV0YWRhdGFQYXJzZSBmcm9tICcuLi9tZXRhZGF0YS1wYXJzZXInO1xuaW1wb3J0IHZhbHVlUGFyc2UgZnJvbSAnLi4vdmFsdWUtcGFyc2VyJztcblxuZnVuY3Rpb24gcmV0dXJuUGFyc2VyKHBhcnNlcjogUGFyc2VyLCBvcHRpb25zOiBQYXJzZXJPcHRpb25zLCBjYWxsYmFjazogKHRva2VuOiBSZXR1cm5WYWx1ZVRva2VuKSA9PiB2b2lkKSB7XG4gIHBhcnNlci5yZWFkVUludDE2TEUoKHBhcmFtT3JkaW5hbCkgPT4ge1xuICAgIHBhcnNlci5yZWFkQlZhckNoYXIoKHBhcmFtTmFtZSkgPT4ge1xuICAgICAgaWYgKHBhcmFtTmFtZS5jaGFyQXQoMCkgPT09ICdAJykge1xuICAgICAgICBwYXJhbU5hbWUgPSBwYXJhbU5hbWUuc2xpY2UoMSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHN0YXR1c1xuICAgICAgcGFyc2VyLnJlYWRVSW50OCgoKSA9PiB7XG4gICAgICAgIG1ldGFkYXRhUGFyc2UocGFyc2VyLCBvcHRpb25zLCAobWV0YWRhdGEpID0+IHtcbiAgICAgICAgICB2YWx1ZVBhcnNlKHBhcnNlciwgbWV0YWRhdGEsIG9wdGlvbnMsICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobmV3IFJldHVyblZhbHVlVG9rZW4oe1xuICAgICAgICAgICAgICBwYXJhbU9yZGluYWw6IHBhcmFtT3JkaW5hbCxcbiAgICAgICAgICAgICAgcGFyYW1OYW1lOiBwYXJhbU5hbWUsXG4gICAgICAgICAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCByZXR1cm5QYXJzZXI7XG5tb2R1bGUuZXhwb3J0cyA9IHJldHVyblBhcnNlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBSUEsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBRUEsSUFBQUMsZUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsWUFBQSxHQUFBRCxzQkFBQSxDQUFBRixPQUFBO0FBQXlDLFNBQUFFLHVCQUFBRSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBUHpDOztBQVNBLFNBQVNHLFlBQVlBLENBQUNDLE1BQWMsRUFBRUMsT0FBc0IsRUFBRUMsUUFBMkMsRUFBRTtFQUN6R0YsTUFBTSxDQUFDRyxZQUFZLENBQUVDLFlBQVksSUFBSztJQUNwQ0osTUFBTSxDQUFDSyxZQUFZLENBQUVDLFNBQVMsSUFBSztNQUNqQyxJQUFJQSxTQUFTLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUU7UUFDL0JELFNBQVMsR0FBR0EsU0FBUyxDQUFDRSxLQUFLLENBQUMsQ0FBQyxDQUFDO01BQ2hDOztNQUVBO01BQ0FSLE1BQU0sQ0FBQ1MsU0FBUyxDQUFDLE1BQU07UUFDckIsSUFBQUMsdUJBQWEsRUFBQ1YsTUFBTSxFQUFFQyxPQUFPLEVBQUdVLFFBQVEsSUFBSztVQUMzQyxJQUFBQyxvQkFBVSxFQUFDWixNQUFNLEVBQUVXLFFBQVEsRUFBRVYsT0FBTyxFQUFHWSxLQUFLLElBQUs7WUFDL0NYLFFBQVEsQ0FBQyxJQUFJWSx1QkFBZ0IsQ0FBQztjQUM1QlYsWUFBWSxFQUFFQSxZQUFZO2NBQzFCRSxTQUFTLEVBQUVBLFNBQVM7Y0FDcEJLLFFBQVEsRUFBRUEsUUFBUTtjQUNsQkUsS0FBSyxFQUFFQTtZQUNULENBQUMsQ0FBQyxDQUFDO1VBQ0wsQ0FBQyxDQUFDO1FBQ0osQ0FBQyxDQUFDO01BQ0osQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0o7QUFBQyxJQUFBRSxRQUFBLEdBRWNoQixZQUFZO0FBQUFpQixPQUFBLENBQUFsQixPQUFBLEdBQUFpQixRQUFBO0FBQzNCRSxNQUFNLENBQUNELE9BQU8sR0FBR2pCLFlBQVkifQ==